<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ruuvi.firmware.c: src/tasks/sensors/task_acceleration.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.firmware.c
   </div>
   <div id="projectbrief">Ruuvi Firmware for nRF52 sensors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('task__acceleration_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">task_acceleration.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;ruuvi_boards.h&quot;</code><br/>
<code>#include &quot;ruuvi_driver_error.h&quot;</code><br/>
<code>#include &quot;ruuvi_driver_sensor.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_acceleration.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_communication.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_gpio_interrupt.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_lis2dh12.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_log.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_rtc.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_scheduler.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_timer.h&quot;</code><br/>
<code>#include &quot;ruuvi_interface_yield.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="task__acceleration_8h_source.html">task_acceleration.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="task__gpio_8h_source.html">task_gpio.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="task__communication_8h_source.html">task_communication.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="task__sensor_8h_source.html">task_sensor.h</a>&quot;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;stddef.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;inttypes.h&gt;</code><br/>
</div>
<p><a href="task__acceleration_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0f5c181abe0ff1f6a5046a99ad4ed00f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#a0f5c181abe0ff1f6a5046a99ad4ed00f">TASK_ACCELERATION_LOG_LEVEL</a>&#160;&#160;&#160;RUUVI_INTERFACE_LOG_INFO</td></tr>
<tr class="separator:a0f5c181abe0ff1f6a5046a99ad4ed00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af855c94dc540e943632089ce7496faac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#af855c94dc540e943632089ce7496faac">LOG</a>(x)&#160;&#160;&#160;ruuvi_interface_log(<a class="el" href="task__acceleration_8c.html#a0f5c181abe0ff1f6a5046a99ad4ed00f">TASK_ACCELERATION_LOG_LEVEL</a>, x);</td></tr>
<tr class="separator:af855c94dc540e943632089ce7496faac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b36b0f2dd4e1d9e2860048733796fa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#a4b36b0f2dd4e1d9e2860048733796fa2">LOGD</a>(x)&#160;&#160;&#160;ruuvi_interface_log(RUUVI_INTERFACE_LOG_DEBUG, x);</td></tr>
<tr class="separator:a4b36b0f2dd4e1d9e2860048733796fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a4a41349dd479fa8db0df60fa4fe21d"><td class="memItemLeft" align="right" valign="top">ruuvi_driver_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#a8a4a41349dd479fa8db0df60fa4fe21d">task_acceleration_init</a> (void)</td></tr>
<tr class="memdesc:a8a4a41349dd479fa8db0df60fa4fe21d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auto-detects and initializes acceleration sensor in low-power state. Reads supported sensors from board.h and tries to initialize them. Configures the sensor according to defaults in <a class="el" href="application__config_8h.html">application_config.h</a>. Does not enable FiFo or activity interrupts, these must be enabled separately. Initializes SPI bus if accelerometer requires SPI and SPI is not initialized. Initializes I2C bus if accelerometer requires I2C and I2C is not initialized.  <a href="#a8a4a41349dd479fa8db0df60fa4fe21d">More...</a><br/></td></tr>
<tr class="separator:a8a4a41349dd479fa8db0df60fa4fe21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21ff51ab50003f845bd0abde9df8456"><td class="memItemLeft" align="right" valign="top">ruuvi_driver_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#ab21ff51ab50003f845bd0abde9df8456">task_acceleration_data_get</a> (ruuvi_driver_sensor_data_t *const data)</td></tr>
<tr class="memdesc:ab21ff51ab50003f845bd0abde9df8456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get latest sample from the sensor. Call to this function fetches data from sensor, however it does not trigger sampling. Remember to trigger sampling in case you're in single-shot mode.  <a href="#ab21ff51ab50003f845bd0abde9df8456">More...</a><br/></td></tr>
<tr class="separator:ab21ff51ab50003f845bd0abde9df8456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81f87d5290a2805b297724428745b59"><td class="memItemLeft" align="right" valign="top">ruuvi_driver_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#ae81f87d5290a2805b297724428745b59">task_acceleration_on_button</a> (void)</td></tr>
<tr class="separator:ae81f87d5290a2805b297724428745b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2797365eb5da91d2d123607d94500c"><td class="memItemLeft" align="right" valign="top">ruuvi_driver_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#a4f2797365eb5da91d2d123607d94500c">task_acceleration_movement_count_get</a> (uint8_t *const count)</td></tr>
<tr class="memdesc:a4f2797365eb5da91d2d123607d94500c"><td class="mdescLeft">&#160;</td><td class="mdescRight">return number of movement counts  <a href="#a4f2797365eb5da91d2d123607d94500c">More...</a><br/></td></tr>
<tr class="separator:a4f2797365eb5da91d2d123607d94500c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99315dea110088abc041f9b22b609d6"><td class="memItemLeft" align="right" valign="top">ruuvi_driver_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__acceleration_8c.html#ad99315dea110088abc041f9b22b609d6">task_acceleration_fifo_use</a> (const bool enable)</td></tr>
<tr class="separator:ad99315dea110088abc041f9b22b609d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af855c94dc540e943632089ce7496faac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;ruuvi_interface_log(<a class="el" href="task__acceleration_8c.html#a0f5c181abe0ff1f6a5046a99ad4ed00f">TASK_ACCELERATION_LOG_LEVEL</a>, x);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00026">26</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4b36b0f2dd4e1d9e2860048733796fa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOGD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;ruuvi_interface_log(RUUVI_INTERFACE_LOG_DEBUG, x);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00027">27</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0f5c181abe0ff1f6a5046a99ad4ed00f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK_ACCELERATION_LOG_LEVEL&#160;&#160;&#160;RUUVI_INTERFACE_LOG_INFO</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00025">25</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab21ff51ab50003f845bd0abde9df8456"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ruuvi_driver_status_t task_acceleration_data_get </td>
          <td>(</td>
          <td class="paramtype">ruuvi_driver_sensor_data_t *const&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get latest sample from the sensor. Call to this function fetches data from sensor, however it does not trigger sampling. Remember to trigger sampling in case you're in single-shot mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>structure which will be filled with acceleration data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>RUUVI_DRIVER_SUCCESS</code> on success </dd>
<dd>
<code>RUUVI_DRIVER_ERROR_NULL</code> if <code>data</code> is <code>NULL</code> </dd>
<dd>
<code>RUUVI_DRIVER_ERROR_INVALID_STATE</code> if accelerometer is not initialize. </dd></dl>

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00081">81</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad99315dea110088abc041f9b22b609d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ruuvi_driver_status_t task_acceleration_fifo_use </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00110">110</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8a4a41349dd479fa8db0df60fa4fe21d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ruuvi_driver_status_t task_acceleration_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auto-detects and initializes acceleration sensor in low-power state. Reads supported sensors from board.h and tries to initialize them. Configures the sensor according to defaults in <a class="el" href="application__config_8h.html">application_config.h</a>. Does not enable FiFo or activity interrupts, these must be enabled separately. Initializes SPI bus if accelerometer requires SPI and SPI is not initialized. Initializes I2C bus if accelerometer requires I2C and I2C is not initialized. </p>
<dl class="section return"><dt>Returns</dt><dd><code>RUUVI_DRIVER_SUCCESS</code> on success. </dd>
<dd>
<code>RUUVI_DRIVER_ERROR_NOT_FOUND</code> if not suitable accelerometer is found. </dd>
<dd>
error code from driver if configuration fails </dd></dl>

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00037">37</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4f2797365eb5da91d2d123607d94500c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ruuvi_driver_status_t task_acceleration_movement_count_get </td>
          <td>(</td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return number of movement counts </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">count</td><td>number of deteted movements </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00104">104</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae81f87d5290a2805b297724428745b59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ruuvi_driver_status_t task_acceleration_on_button </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="task__acceleration_8c_source.html#l00098">98</a> of file <a class="el" href="task__acceleration_8c_source.html">task_acceleration.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b118c466441e8db851de69c6796245a3.html">tasks</a></li><li class="navelem"><a class="el" href="dir_c450b108e3d99d82b1fadbe7f61bc238.html">sensors</a></li><li class="navelem"><a class="el" href="task__acceleration_8c.html">task_acceleration.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
